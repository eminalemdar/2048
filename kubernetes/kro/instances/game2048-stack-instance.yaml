apiVersion: kro.run/v1alpha1
kind: Game2048Stack
metadata:
  name: game2048-production-stack
  namespace: game-2048
  annotations:
    aws-account-id: "123456789012"  # Replace with your AWS account ID
spec:
  environment: "prod"
  region: "eu-west-1"
  
  # DynamoDB configuration
  dynamodb:
    tableName: "game2048-leaderboard-prod"
    billingMode: "PAY_PER_REQUEST"
    pointInTimeRecovery: true
    serverSideEncryption: true
  
  # S3 configuration
  s3:
    enabled: true
    bucketName: ""  # Will be auto-generated
    versioning: true
    encryption: true
    blockPublicAccess: true
    lifecycleEnabled: true
    transitionToIA: 30
    transitionToGlacier: 90
    expiration: 365
  
  # Application configuration
  application:
    namespace: "game-2048"
    backend:
      image: "2048-backend:v1.0.0"
      replicas: 5
      port: 8000
    frontend:
      image: "2048-frontend:v1.0.0"
      replicas: 5
      port: 80
    ingress:
      enabled: true
      hostname: "2048.example.com"
      ingressClass: "nginx"
    autoscaling:
      enabled: true
      minReplicas: 3
      maxReplicas: 20
      targetCPU: 60